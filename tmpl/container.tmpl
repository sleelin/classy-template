<?js
var self = this;
var isGlobalPage = (obj.kind === "globalobj");
?>

<?js if (obj.kind === "mainpage") { ?>
    <?js= this.partial("masters/mainpage.tmpl", obj) ?>
<?js } else if (obj.kind === "source") { ?>
    <?js= this.partial("masters/source.tmpl", obj) ?>
<?js } else { ?>
    <section>
        <header>
            <?js if (!obj.longname || obj.kind !== "module") { ?>
                <h2>
                    <?js if (obj.attribs) { ?><span class="attribs"><?js= obj.attribs ?></span><?js } ?>
                    <?js if (obj.ancestors && obj.ancestors.length) { ?><span class="ancestors"><?js= obj.ancestors.join("") ?></span><?js } ?>
                    <span><?js= obj.name ?></span>
                    <?js if (obj.variation) { ?><sup class="variation"><?js= obj.variation ?></sup><?js } ?>
                    <?js if (obj.signature && !obj.hideconstructor) { ?><?js= obj.signature ?><?js } ?>
                </h2>
                <?js if (obj.classdesc) { ?><div class="class-description"><?js= obj.classdesc ?></div><?js } ?>
            <?js } else if (obj.kind === "module" && obj.modules) {
                obj.modules.forEach((module) => {
                    if (module.classdesc) { ?><div class="class-description"><?js= module.classdesc ?></div><?js } ?><?js
                })
            } ?>
            <div class="container-overview">
                <?js if (obj.kind === "module" && obj.modules) { ?>
                    <?js if (obj.description) { ?><div class="overview-description"><?js= obj.description ?></div><?js } ?>
                    <?js obj.modules.forEach((module) => { ?><?js= this.partial("partials/method.tmpl", module) ?><?js }) ?>
                <?js } else if (obj.kind === "class" || (obj.kind === "namespace" && obj.signature)) { ?>
                    <?js= this.partial("partials/method.tmpl", obj) ?>
                <?js } else { ?>
                    <?js if (obj.description) { ?><div class="overview-description"><?js= obj.description ?></div><?js } ?>
                    <?js= this.partial("partials/details.tmpl", obj) ?>
                    <?js= this.partial("tags/examples.tmpl", obj) ?>
                <?js } ?>
            </div>
        </header>
        <article>
            <?js if (obj?.requires?.length) { ?>
                <h3 class="subsection-title">Requires</h3>
                <ul>
                    <?js obj.requires.forEach((r) => { ?><li><?js= this.linkto(r, r) ?></li><?js }); ?>
                </ul>
            <?js } ?>

            <?js if (!isGlobalPage && obj?.doclets?.class?.length) { ?>
                <h3 class="subsection-title">Classes</h3>
                <dl>
                    <?js obj.doclets.class.forEach((c) => { ?>
                        <dt><?js= this.linkto(c.longname, c.name) ?></dt>
                        <dd><?js if (c.summary) { ?><?js= c.summary ?><?js } ?></dd>
                    <?js }); ?>
                </dl>
            <?js } ?>

            <?js if (!isGlobalPage && obj?.doclets?.interface?.length) { ?>
                <h3 class="subsection-title">Interfaces</h3>
                <dl>
                    <?js obj.doclets.interface.forEach((i) => { ?>
                        <dt><?js= this.linkto(i.longname, i.name) ?></dt>
                        <dd><?js if (i.summary) { ?><?js= i.summary ?><?js } ?></dd>
                    <?js }); ?>
                </dl>
            <?js } ?>

            <?js if (!isGlobalPage && obj?.doclets?.mixin?.length) { ?>
                <h3 class="subsection-title">Mixins</h3>
                <dl>
                    <?js obj.doclets.mixin.forEach((m) => { ?>
                        <dt><?js= this.linkto(m.longname, m.name) ?></dt>
                        <dd><?js if (m.summary) { ?><?js= m.summary ?><?js } ?></dd>
                    <?js }); ?>
                </dl>
            <?js } ?>

            <?js if (!isGlobalPage && obj?.doclets?.namespace?.length) { ?>
                <h3 class="subsection-title">Namespaces</h3>
                <dl>
                    <?js obj.doclets.namespace.forEach((n) => { ?>
                        <dt><?js= this.linkto(n.longname, n.name) ?></dt>
                        <dd><?js if (n.summary) { ?><?js= n.summary ?><?js } ?></dd>
                    <?js }); ?>
                </dl>
            <?js } ?>

            <?js
                var members = obj.doclets.member;

                // Symbols that are assigned to module.exports are not globals, even though they're not a memberof anything
                if (isGlobalPage && members && members.length && members.forEach) {
                    members = members.filter((m) => (m.longname && m.longname.indexOf("module:") !== 0))
                }

                if (members && members.length && members.forEach) {
            ?>
                <section>
                    <h3 class="subsection-title">Members</h3>
                    <?js members.forEach((p) => { ?><?js= this.partial("partials/members.tmpl", p) ?><?js }); ?>
                </section>
            <?js } ?>

            <?js if (obj?.doclets?.function?.length) { ?>
                <section>
                    <h3 class="subsection-title">Methods</h3>
                    <?js obj.doclets.function.forEach((m) => { ?><?js= this.partial("partials/method.tmpl", m) ?><?js }); ?>
                </section>
            <?js } ?>

            <?js if (obj?.doclets?.typedef?.length) { ?>
                <section>
                    <h3 class="subsection-title">Type Definitions</h3>
                    <?js obj.doclets.typedef.forEach((e) => { ?>
                        <?js if (e.signature) { ?>
                            <?js= this.partial("partials/method.tmpl", e) ?>
                        <?js } else { ?>
                            <?js= this.partial("partials/members.tmpl", e) ?>
                        <?js } ?>
                    <?js }); ?>
                </section>
            <?js } ?>

            <?js if (obj?.doclets?.event?.length) { ?>
                <section>
                    <h3 class="subsection-title">Events</h3>
                    <?js obj.doclets.event.forEach((e) => { ?><?js= this.partial("partials/method.tmpl", e) ?><?js }); ?>
                </section>
            <?js } ?>
        </article>
    </section>
<?js } ?>